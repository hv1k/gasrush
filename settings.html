<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GasRush â€” Settings</title>
    <link rel="stylesheet" href="theme.css">
</head>
<body>
    <div class="app-layout">
        <aside class="sidebar">
            <div class="sidebar-brand">
                <div class="logo">â›½</div>
                <span class="brand-name">GasRush</span>
            </div>
            <nav id="sidebarNav"></nav>
            <div id="sidebarFooter"></div>
        </aside>

        <main class="main-content">
            <div class="page-header">
                <h1>Settings</h1>
                <p class="text-secondary">Manage your account and preferences</p>
            </div>

            <!-- Profile Card -->
            <div class="card" style="margin-bottom:24px;">
                <div class="card-header">
                    <h2 class="card-title">ðŸ‘¤ Profile</h2>
                </div>
                <div style="padding:24px;" id="profileContainer">
                    <div class="empty-state"><h3>Loading...</h3></div>
                </div>
            </div>

            <!-- Theme Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">ðŸŽ¨ Theme</h2>
                </div>
                <div style="padding:24px;">
                    <p style="color:var(--text-secondary);margin-bottom:12px;">Toggle between light and dark mode using the theme switch in the sidebar.</p>
                    <p style="color:var(--text-muted);font-size:14px;">Your preference is saved automatically in your browser.</p>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
    <script src="mobile.js"></script>
    <script>
        (async () => {
            const user = await GasRush.init({ roles: ['rental', 'vendor', 'fieldworker', 'admin'] });
            if (!user) return;

            const container = document.getElementById('profileContainer');
            const fields = [
                ['Name', user.name || 'â€”'],
                ['Email', user.email || 'â€”'],
                ['Role', (user.role || 'â€”').charAt(0).toUpperCase() + (user.role || '').slice(1)],
                ['Company', user.company || user.vendor_name || 'â€”'],
            ];

            container.innerHTML = `<div style="display:grid;grid-template-columns:140px 1fr;gap:16px 24px;">
                ${fields.map(([label, value]) => `
                    <div style="color:var(--text-secondary);font-weight:500;">${label}</div>
                    <div style="color:var(--text-primary);font-weight:600;">${value}</div>
                `).join('')}
            </div>`;
        })();
    </script>
</body>
</html>
